<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share Your Experience - Website Review</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#1E40AF'
                    }
                }
            }
        }
    </script>
    <style>
        .star-rating {
            display: flex;
            gap: 4px;
        }
        .star {
            font-size: 2rem;
            color: #e5e7eb;
            cursor: pointer;
            transition: color 0.2s;
        }
        .star.active,
        .star:hover {
            color: #fbbf24;
        }
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.8s ease-in-out forwards;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        .slide-up {
            transform: translateY(20px);
            opacity: 0;
            animation: slideUp 0.6s ease-out forwards;
        }
        @keyframes slideUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-2xl mx-auto py-12 px-4">
        <!-- Header -->
        <div class="text-center mb-8 fade-in">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                Share Your Experience
            </h1>
            <p class="text-lg text-gray-600 max-w-lg mx-auto">
                We'd love to hear about your experience with our website services. Your feedback helps us improve and helps others make informed decisions.
            </p>
        </div>

        <!-- Review Form -->
        <div class="bg-white rounded-2xl shadow-lg p-8 slide-up">
            <form id="reviewForm" action="submit-review.php" method="POST">
                <!-- Name -->
                <div class="mb-6">
                    <label for="name" class="block text-sm font-semibold text-gray-700 mb-2">
                        Your Name *
                    </label>
                    <input 
                        type="text" 
                        id="name" 
                        name="name" 
                        required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                        placeholder="Enter your full name"
                    >
                </div>

                <!-- Email -->
                <div class="mb-6">
                    <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                        Email Address *
                    </label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                        placeholder="your@email.com"
                    >
                </div>

                <!-- Website -->
                <div class="mb-6">
                    <label for="website" class="block text-sm font-semibold text-gray-700 mb-2">
                        Your Website URL
                    </label>
                    <input 
                        type="url" 
                        id="website" 
                        name="website" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                        placeholder="https://yourwebsite.com"
                    >
                    <p class="text-sm text-gray-500 mt-1">The website we analyzed for you (optional)</p>
                </div>

                <!-- Rating -->
                <div class="mb-6">
                    <label class="block text-sm font-semibold text-gray-700 mb-3">
                        How would you rate our service? *
                    </label>
                    <div class="star-rating mb-2">
                        <span class="star" data-rating="1">★</span>
                        <span class="star" data-rating="2">★</span>
                        <span class="star" data-rating="3">★</span>
                        <span class="star" data-rating="4">★</span>
                        <span class="star" data-rating="5">★</span>
                    </div>
                    <p id="rating-text" class="text-sm text-gray-500">Click to rate</p>
                    <input type="hidden" id="rating" name="rating" required>
                </div>

                <!-- Review Text -->
                <div class="mb-6">
                    <label for="review_text" class="block text-sm font-semibold text-gray-700 mb-2">
                        Your Review *
                    </label>
                    <textarea 
                        id="review_text" 
                        name="review_text" 
                        required 
                        rows="5"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors resize-none"
                        placeholder="Tell us about your experience with any our website services, including our AI website analyzer. What did you find most helpful? How did it impact your website?"
                    ></textarea>
                    <div class="flex justify-between mt-1">
                        <p class="text-sm text-gray-500">Share specific details about how our services helped you</p>
                        <span id="char-count" class="text-sm text-gray-400">0 characters</span>
                    </div>
                </div>

                <!-- Permission Checkbox -->
                <div class="mb-6">
                    <label class="flex items-start space-x-3">
                        <input 
                            type="checkbox" 
                            name="permission" 
                            value="1"
                            class="mt-1 h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                        >
                        <div class="text-sm text-gray-700">
                            <span class="font-medium">Permission to display:</span> I give permission for this review to be displayed on your website and marketing materials. Your email will never be shared publicly.
                        </div>
                    </label>
                </div>

                <!-- Submit Button -->
                <button 
                    type="submit" 
                    id="submitBtn"
                    class="w-full bg-gradient-to-r from-primary to-secondary text-white font-semibold py-4 px-6 rounded-xl hover:from-blue-600 hover:to-blue-800 transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300"
                >
                    <span id="submitText">Submit Review</span>
                    <span id="submitLoader" class="hidden">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Submitting...
                    </span>
                </button>
            </form>

            <!-- Success Message -->
            <div id="successMessage" class="hidden text-center py-8">
                <div class="text-green-600 text-6xl mb-4">✓</div>
                <h2 class="text-2xl font-bold text-gray-900 mb-2">Thank You!</h2>
                <p class="text-gray-600 mb-4">
                    Your review has been submitted successfully. We really appreciate you taking the time to share your experience.
                </p>
                <p class="text-sm text-gray-500">
                    Your review will be reviewed and may appear on our website to help other potential clients.
                </p>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="hidden bg-red-50 border border-red-200 rounded-lg p-4 mt-4">
                <div class="flex">
                    <div class="text-red-400 text-xl mr-3">⚠</div>
                    <div>
                        <h3 class="text-red-800 font-medium">Submission Failed</h3>
                        <p id="errorText" class="text-red-700 text-sm mt-1"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-gray-500 text-sm">
            <p>Thank you for choosing our website analysis service!</p>
            <p class="mt-1">Questions? Contact us at <a href="mailto:hello@withsparkdesign.com" class="text-primary hover:underline">hello@withsparkdesign.com</a></p>
        </div>
    </div>

    <script>
        // Star rating functionality
        const stars = document.querySelectorAll('.star');
        const ratingInput = document.getElementById('rating');
        const ratingText = document.getElementById('rating-text');
        
        const ratingLabels = {
            1: 'Poor - Not satisfied',
            2: 'Fair - Below expectations', 
            3: 'Good - Met expectations',
            4: 'Very Good - Exceeded expectations',
            5: 'Excellent - Outstanding service'
        };

        stars.forEach(star => {
            star.addEventListener('click', () => {
                const rating = parseInt(star.dataset.rating);
                ratingInput.value = rating;
                ratingText.textContent = ratingLabels[rating];
                
                // Update star display
                stars.forEach((s, index) => {
                    if (index < rating) {
                        s.classList.add('active');
                    } else {
                        s.classList.remove('active');
                    }
                });
            });

            star.addEventListener('mouseenter', () => {
                const rating = parseInt(star.dataset.rating);
                stars.forEach((s, index) => {
                    if (index < rating) {
                        s.style.color = '#fbbf24';
                    } else {
                        s.style.color = '#e5e7eb';
                    }
                });
            });
        });

        // Reset stars on mouse leave
        document.querySelector('.star-rating').addEventListener('mouseleave', () => {
            const currentRating = parseInt(ratingInput.value) || 0;
            stars.forEach((s, index) => {
                if (index < currentRating) {
                    s.style.color = '#fbbf24';
                } else {
                    s.style.color = '#e5e7eb';
                }
            });
        });

        // Character counter
        const reviewText = document.getElementById('review_text');
        const charCount = document.getElementById('char-count');
        
        reviewText.addEventListener('input', () => {
            const count = reviewText.value.length;
            charCount.textContent = `${count} characters`;
            
            if (count > 500) {
                charCount.classList.add('text-yellow-600');
            } else {
                charCount.classList.remove('text-yellow-600');
            }
        });

        // Form submission
        document.getElementById('reviewForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const submitLoader = document.getElementById('submitLoader');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const form = e.target;
            
            // Validate rating
            if (!ratingInput.value) {
                alert('Please select a rating');
                return;
            }
            
            // Show loading state
            submitBtn.disabled = true;
            submitText.classList.add('hidden');
            submitLoader.classList.remove('hidden');
            
            try {
                const formData = new FormData(form);
                const response = await fetch('submit-review.php', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Hide form and show success message
                    form.style.display = 'none';
                    successMessage.classList.remove('hidden');
                } else {
                    throw new Error(result.message || 'Submission failed');
                }
                
            } catch (error) {
                // Show error message
                document.getElementById('errorText').textContent = error.message;
                errorMessage.classList.remove('hidden');
                
                // Reset button
                submitBtn.disabled = false;
                submitText.classList.remove('hidden');
                submitLoader.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
